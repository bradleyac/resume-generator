@using System.Linq.Expressions

<div class="mb-3" @attributes="AdditionalAttributes">
  <label for="@fieldId" class="form-label">@(Label ?? FieldName)</label>
  <OnInputInputText id="@fieldId" class="form-control" Value=@Value ValueExpression="@(ValueExpression)" ValueChanged="ValueChanged" />
</div>

@code {
  [Parameter] public Expression<Func<string?>> ValueExpression { get; set; } = null!;
  [Parameter] public string? Value { get; set; } = null!;
  [Parameter] public EventCallback<string?> ValueChanged { get; set; }
  [Parameter] public string? Label { get; set; }
  [Parameter(CaptureUnmatchedValues = true)]
  public IDictionary<string, object>? AdditionalAttributes { get; set; }

  private string FieldName => ((ValueExpression.Body as MemberExpression)?.Member.Name) ?? "";
  private string fieldId = Guid.NewGuid().ToString();
}